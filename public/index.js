!function(e){function n(e){delete installedChunks[e]}function t(e){var n=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.charset="utf-8",t.src=f.p+""+e+"."+w+".hot-update.js",n.appendChild(t)}function o(){return new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var t=new XMLHttpRequest,o=f.p+""+w+".hot-update.json";t.open("GET",o,!0),t.timeout=1e4,t.send(null)}catch(e){return n(e)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)n(new Error("Manifest request to "+o+" timed out."));else if(404===t.status)e();else if(200!==t.status&&304!==t.status)n(new Error("Manifest request to "+o+" failed."));else{try{var r=JSON.parse(t.responseText)}catch(e){return void n(e)}e(r)}}})}function r(e){var n=k[e];if(!n)return f;var t=function(t){return n.hot.active?(k[t]?k[t].parents.indexOf(e)<0&&k[t].parents.push(e):O=[e],n.children.indexOf(t)<0&&n.children.push(t)):(console.warn("[HMR] unexpected require("+t+") from disposed module "+e),O=[]),b=!1,f(t)};for(var o in f)Object.prototype.hasOwnProperty.call(f,o)&&Object.defineProperty(t,o,function(e){return{configurable:!0,enumerable:!0,get:function(){return f[e]},set:function(n){f[e]=n}}}(o));return Object.defineProperty(t,"e",{enumerable:!0,value:function(e){function n(){M--,"prepare"===x&&(P[e]||l(e),0===M&&0===D&&u())}return"ready"===x&&c("prepare"),M++,f.e(e).then(n,function(e){throw n(),e})}}),t}function i(e){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:b,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var o=0;o<e.length;o++)n._acceptedDependencies[e[o]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);t>=0&&n._disposeHandlers.splice(t,1)},check:d,apply:p,status:function(e){if(!e)return x;E.push(e)},addStatusHandler:function(e){E.push(e)},removeStatusHandler:function(e){var n=E.indexOf(e);n>=0&&E.splice(n,1)},data:_[e]};return b=!0,n}function c(e){x=e;for(var n=0;n<E.length;n++)E[n].call(null,e)}function a(e){return+e+""===e?+e:e}function d(e){if("idle"!==x)throw new Error("check() is only allowed in idle status");return g=e,c("check"),o().then(function(e){if(!e)return c("idle"),null;A={},P={},I=e.c,y=e.h,c("prepare");var n=new Promise(function(e,n){v={resolve:e,reject:n}});m={};return l(0),"prepare"===x&&0===M&&0===D&&u(),n})}function s(e,n){if(I[e]&&A[e]){A[e]=!1;for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(m[t]=n[t]);0==--D&&0===M&&u()}}function l(e){I[e]?(A[e]=!0,D++,t(e)):P[e]=!0}function u(){c("ready");var e=v;if(v=null,e)if(g)p(g).then(function(n){e.resolve(n)},function(n){e.reject(n)});else{var n=[];for(var t in m)Object.prototype.hasOwnProperty.call(m,t)&&n.push(a(t));e.resolve(n)}}function p(t){function o(e,n){for(var t=0;t<n.length;t++){var o=n[t];e.indexOf(o)<0&&e.push(o)}}if("ready"!==x)throw new Error("apply() is only allowed in ready status");t=t||{};var r,i,d,s,l,u={},p=[],h={},v=function(){console.warn("[HMR] unexpected require("+b.moduleId+") to disposed module")};for(var g in m)if(Object.prototype.hasOwnProperty.call(m,g)){l=a(g);var b;b=m[g]?function(e){for(var n=[e],t={},r=n.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var i=r.pop(),c=i.id,a=i.chain;if((s=k[c])&&!s.hot._selfAccepted){if(s.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:c};if(s.hot._main)return{type:"unaccepted",chain:a,moduleId:c};for(var d=0;d<s.parents.length;d++){var l=s.parents[d],u=k[l];if(u){if(u.hot._declinedDependencies[c])return{type:"declined",chain:a.concat([l]),moduleId:c,parentId:l};n.indexOf(l)>=0||(u.hot._acceptedDependencies[c]?(t[l]||(t[l]=[]),o(t[l],[c])):(delete t[l],n.push(l),r.push({chain:a.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:n,outdatedDependencies:t}}(l):{type:"disposed",moduleId:g};var j=!1,E=!1,D=!1,M="";switch(b.chain&&(M="\nUpdate propagation: "+b.chain.join(" -> ")),b.type){case"self-declined":t.onDeclined&&t.onDeclined(b),t.ignoreDeclined||(j=new Error("Aborted because of self decline: "+b.moduleId+M));break;case"declined":t.onDeclined&&t.onDeclined(b),t.ignoreDeclined||(j=new Error("Aborted because of declined dependency: "+b.moduleId+" in "+b.parentId+M));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(b),t.ignoreUnaccepted||(j=new Error("Aborted because "+l+" is not accepted"+M));break;case"accepted":t.onAccepted&&t.onAccepted(b),E=!0;break;case"disposed":t.onDisposed&&t.onDisposed(b),D=!0;break;default:throw new Error("Unexception type "+b.type)}if(j)return c("abort"),Promise.reject(j);if(E){h[l]=m[l],o(p,b.outdatedModules);for(l in b.outdatedDependencies)Object.prototype.hasOwnProperty.call(b.outdatedDependencies,l)&&(u[l]||(u[l]=[]),o(u[l],b.outdatedDependencies[l]))}D&&(o(p,[b.moduleId]),h[l]=v)}var P=[];for(i=0;i<p.length;i++)l=p[i],k[l]&&k[l].hot._selfAccepted&&P.push({module:l,errorHandler:k[l].hot._selfAccepted});c("dispose"),Object.keys(I).forEach(function(e){!1===I[e]&&n(e)});for(var A,H=p.slice();H.length>0;)if(l=H.pop(),s=k[l]){var L={},T=s.hot._disposeHandlers;for(d=0;d<T.length;d++)(r=T[d])(L);for(_[l]=L,s.hot.active=!1,delete k[l],d=0;d<s.children.length;d++){var S=k[s.children[d]];S&&((A=S.parents.indexOf(l))>=0&&S.parents.splice(A,1))}}var C,N;for(l in u)if(Object.prototype.hasOwnProperty.call(u,l)&&(s=k[l]))for(N=u[l],d=0;d<N.length;d++)C=N[d],(A=s.children.indexOf(C))>=0&&s.children.splice(A,1);c("apply"),w=y;for(l in h)Object.prototype.hasOwnProperty.call(h,l)&&(e[l]=h[l]);var U=null;for(l in u)if(Object.prototype.hasOwnProperty.call(u,l)){s=k[l],N=u[l];var q=[];for(i=0;i<N.length;i++)C=N[i],r=s.hot._acceptedDependencies[C],q.indexOf(r)>=0||q.push(r);for(i=0;i<q.length;i++){r=q[i];try{r(N)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:N[i],error:e}),t.ignoreErrored||U||(U=e)}}}for(i=0;i<P.length;i++){var z=P[i];l=z.module,O=[l];try{f(l)}catch(e){if("function"==typeof z.errorHandler)try{z.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:n,orginalError:e}),t.ignoreErrored||U||(U=n),U||(U=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:e}),t.ignoreErrored||U||(U=e)}}return U?(c("fail"),Promise.reject(U)):(c("idle"),Promise.resolve(p))}function f(n){if(k[n])return k[n].exports;var t=k[n]={i:n,l:!1,exports:{},hot:i(n),parents:(j=O,O=[],j),children:[]};return e[n].call(t.exports,t,t.exports,r(n)),t.l=!0,t.exports}var h=this.webpackHotUpdate;this.webpackHotUpdate=function(e,n){s(e,n),h&&h(e,n)};var v,m,y,g=!0,w="3e8ff6ff2a6a8e613701",_={},b=!0,O=[],j=[],E=[],x="idle",D=0,M=0,P={},A={},I={},k={};f.m=e,f.c=k,f.i=function(e){return e},f.d=function(e,n,t){f.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},f.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(n,"a",n),n},f.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},f.p="",f.h=function(){return w},r(4)(f.s=4)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={MAPBOX:{TOKEN:"pk.eyJ1IjoibWpicCIsImEiOiJjajE3bWN5emEwMDM2MndwaTIyaDM0MzI0In0.xjz0mBZ1EFUHBSoIT0UUlQ",API_SRC:["https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.js","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v3.1.1/mapbox-gl-directions.js"],CONTAINER_ID:"map",DEFAULT_LAT_LNG:[-3.1880175,55.9748066]},DATA:"./data.json"}},function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=t(0),i=o(r),c=t(3),a=o(c),d=function(e){return'<div class="map__overlay js-overlay">\n        <div class="map__overlay-row map__heading">'+e.site+'</div>\n        <div class="map__overlay-row">'+e.address+", "+e.postcode+'</div>\n        <div class="map__overlay-row">'+e.facilities+'</div>\n        <div class="map__overlay-row-directions js-directions">\n            <svg class="map__overlay-row-icon" fill="#ffffff" height="18" viewBox="0 0 24 24" width="18" xmlns="http://www.w3.org/2000/svg">\n                <path d="M21.71 11.29l-9-9c-.39-.39-1.02-.39-1.41 0l-9 9c-.39.39-.39 1.02 0 1.41l9 9c.39.39 1.02.39 1.41 0l9-9c.39-.38.39-1.01 0-1.41zM14 14.5V12h-4v3H8v-4c0-.55.45-1 1-1h5V7.5l3.5 3.5-3.5 3.5z"/>\n                <path d="M0 0h24v24H0z" fill="none"/>\n            </svg>\n            Get directions\n        </div>\n        \n        <svg class="js-map__close map__overlay-close" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n            <path d="M0 0h24v24H0z" fill="none"/>\n        </svg>\n    </div>'},s=void 0,l=void 0,u=void 0,p=void 0,f=function(){fetch("/data.json").then(function(e){return e.json()}).then(function(e){p=e}).catch(function(e){console.warn()})},h=function(){mapboxgl.accessToken=i.default.MAPBOX.TOKEN,s=new mapboxgl.Map({container:i.default.MAPBOX.CONTAINER_ID,style:"mapbox://styles/mapbox/dark-v9",center:i.default.MAPBOX.DEFAULT_LAT_LNG,zoom:13}),navigator&&s.addControl(new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0}}).on("geolocate",function(e){e.coords&&(l=[e.coords.longitude,e.coords.latitude])}));var e=new mapboxgl.NavigationControl;s.addControl(e,"bottom-right"),s.on("load",y)},v=function(e){var n=new MapboxDirections({accessToken:mapboxgl.accessToken,unit:"metric",profile:"walking",container:"directions",proximity:[-79.45,43.65]});u=s.addControl(n,"top-left"),n.setOrigin(l||i.default.MAPBOX.DEFAULT_LAT_LNG),n.setDestination(e),n.on("route",function(e){console.log(e.route)}),console.log(u)},m=function(e){return e.map(function(e){return{type:"Feature",properties:{address:e.Address,postcode:e.Postcode,site:e.Site,facilities:e["Play facilities"],iconSize:[24,24]},geometry:{type:"Point",coordinates:[e.Location.split(",")[1],e.Location.split(",")[0]]}}})},y=function(){s.addLayer({id:"places",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:m(p)}},layout:{"icon-image":"{icon}-15","icon-allow-overlap":!0}}),m(p).forEach(function(e){var n=document.createElement("div");n.className="marker",n.style.backgroundImage="url(/img/park.svg)",n.style.width="24px",n.style.height="24px",n.addEventListener("click",function(n){g(e.properties,e.geometry.coordinates)}),new mapboxgl.Marker(n,{offset:[-e.properties.iconSize[0]/2,-e.properties.iconSize[1]/2]}).setLngLat(e.geometry.coordinates).addTo(s)})},g=function(e,n){document.querySelector(".js-map").insertAdjacentHTML("beforeend",d(e)),document.querySelector(".js-map__close").addEventListener("click",w),document.querySelector(".js-directions").addEventListener("click",function(){w(),v(n)})},w=function(){document.querySelector(".js-overlay").parentNode.removeChild(document.querySelector(".js-overlay"))};n.default=function(){(0,a.default)(i.default.MAPBOX.API_SRC).then(function(){f(),h()}).catch(function(e){console.warn()})}},function(e,n){},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});/**
 * @name storm-load: Lightweight promise-based script loader
 * @version 0.5.1: Fri, 10 Mar 2017 17:30:13 GMT
 * @author stormid
 * @license MIT
 */
var o=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise(function(t,o){var r=document.createElement("script");r.src=e,r.async=n,r.onload=r.onreadystatechange=function(){this.readyState&&"complete"!==this.readyState||t()},r.onerror=r.onabort=o,document.head.appendChild(r)})},r=n.synchronous=function(e){return new Promise(function(n,t){!function r(){if(!e.length)return n();o(e.shift(),!1).then(r).catch(t)}()})};n.default=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=[].concat(e),n?Promise.all(e.map(function(e){return o(e)})):r(e)}},function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=t(2),i=(o(r),t(0)),c=(o(i),t(1)),a=o(c),d=[a.default,function(){"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("sw.js")})}];"addEventListener"in window&&!!d.length&&window.addEventListener("DOMContentLoaded",function(){d.forEach(function(e){return e()})})}]);
//# sourceMappingURL=index.js.map